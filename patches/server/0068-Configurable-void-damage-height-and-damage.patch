From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: William Blake Galbreath <blake.galbreath@gmail.com>
Date: Thu, 9 Jun 2022 14:54:09 -0400
Subject: [PATCH] Configurable void damage height and damage


diff --git a/src/main/java/net/minecraft/world/entity/Entity.java b/src/main/java/net/minecraft/world/entity/Entity.java
index b2074bf9a48a2b63fae198f69bcea46364f6f042..e3fdac835eec6b3e39960f6cbf24955ab1ee13d5 100644
--- a/src/main/java/net/minecraft/world/entity/Entity.java
+++ b/src/main/java/net/minecraft/world/entity/Entity.java
@@ -851,7 +851,7 @@ public abstract class Entity implements Nameable, EntityAccess, CommandSource {
 
     public void checkOutOfWorld() {
         // Paper start - Configurable nether ceiling damage
-        if (this.getY() < (double) (this.level.getMinBuildHeight() - 64) || (this.level.getWorld().getEnvironment() == org.bukkit.World.Environment.NETHER
+        if (this.getY() < (double) (this.level.getMinBuildHeight() + level.purpurConfig().gameplayMechanics.voidSettings.damageHeight) || (this.level.getWorld().getEnvironment() == org.bukkit.World.Environment.NETHER // Purpur
             && level.paperConfig().environment.netherCeilingVoidDamageHeight > 0
             && this.getY() >= this.level.paperConfig().environment.netherCeilingVoidDamageHeight)) {
             // Paper end
diff --git a/src/main/java/net/minecraft/world/entity/LivingEntity.java b/src/main/java/net/minecraft/world/entity/LivingEntity.java
index 6e5dd6f71efb10a03b9f5fd74105fabf44f568a7..ed7437f05b195b923aaa06fa5b6312ee5727ee1c 100644
--- a/src/main/java/net/minecraft/world/entity/LivingEntity.java
+++ b/src/main/java/net/minecraft/world/entity/LivingEntity.java
@@ -2445,7 +2445,7 @@ public abstract class LivingEntity extends Entity {
 
     @Override
     protected void outOfWorld() {
-        this.hurt(DamageSource.OUT_OF_WORLD, 4.0F);
+        this.hurt(DamageSource.OUT_OF_WORLD, (float) level.purpurConfig().gameplayMechanics.voidSettings.damageDealt); // Purpur
     }
 
     protected void updateSwingTime() {
diff --git a/src/main/java/org/purpurmc/purpur/configuration/PurpurWorldConfiguration.java b/src/main/java/org/purpurmc/purpur/configuration/PurpurWorldConfiguration.java
index e8eefff47594d37385eae2581cd9952ab798496d..8a135e99ee64caacdad5fcdf5ac3f4b7613c04ee 100644
--- a/src/main/java/org/purpurmc/purpur/configuration/PurpurWorldConfiguration.java
+++ b/src/main/java/org/purpurmc/purpur/configuration/PurpurWorldConfiguration.java
@@ -1330,6 +1330,8 @@ public class PurpurWorldConfiguration extends ConfigurationPart {
         public Void voidSettings;
         public class Void extends ConfigurationPart {
             public double loyaltyTridentReturnHeight = 0.0D;
+            public double damageHeight = -64.0D;
+            public double damageDealt = 4.0D;
         }
 
         public Boat boat;
