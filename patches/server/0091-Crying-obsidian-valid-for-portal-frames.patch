From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: William Blake Galbreath <Blake.Galbreath@GMail.com>
Date: Mon, 17 Aug 2020 17:34:33 -0500
Subject: [PATCH] Crying obsidian valid for portal frames


diff --git a/src/main/java/net/minecraft/world/level/portal/PortalShape.java b/src/main/java/net/minecraft/world/level/portal/PortalShape.java
index 3414f3190e1a760c602613e82e551e797c3aa575..452417e768781402ceb9eeb86a7ff85e435da9d5 100644
--- a/src/main/java/net/minecraft/world/level/portal/PortalShape.java
+++ b/src/main/java/net/minecraft/world/level/portal/PortalShape.java
@@ -30,7 +30,7 @@ public class PortalShape {
     private static final int MIN_HEIGHT = 3;
     public static final int MAX_HEIGHT = 21;
     private static final BlockBehaviour.StatePredicate FRAME = (iblockdata, iblockaccess, blockposition) -> {
-        return iblockdata.is(Blocks.OBSIDIAN);
+        return iblockdata.is(Blocks.OBSIDIAN) || (org.purpurmc.purpur.configuration.PurpurConfiguration.get().blocks.cryingObsidian.validForPortalFrame && iblockdata.is(Blocks.CRYING_OBSIDIAN)); // Purpur
     };
     private final LevelAccessor level;
     private final Direction.Axis axis;
diff --git a/src/main/java/org/purpurmc/purpur/configuration/PurpurConfiguration.java b/src/main/java/org/purpurmc/purpur/configuration/PurpurConfiguration.java
index 9bd22087bed022a392d3f0f3685c51246038ad41..89898663375c818f1f2c405d213b1d34cd627fb9 100644
--- a/src/main/java/org/purpurmc/purpur/configuration/PurpurConfiguration.java
+++ b/src/main/java/org/purpurmc/purpur/configuration/PurpurConfiguration.java
@@ -77,6 +77,11 @@ public class PurpurConfiguration extends ConfigurationPart {
                 InventoryType.ENDER_CHEST.setDefaultSize(sixRows ? 54 : 27);
             }
         }
+
+        public CryingObsidian cryingObsidian;
+        public class CryingObsidian extends ConfigurationPart {
+            public boolean validForPortalFrame = false;
+        }
     }
 
     public Entity entity;
