From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: DoctaEnkoda <bierquejason@gmail.com>
Date: Mon, 17 May 2021 12:47:11 +0200
Subject: [PATCH] Automatically deactivated online mode if using a proxy


diff --git a/src/main/java/net/minecraft/server/dedicated/DedicatedServer.java b/src/main/java/net/minecraft/server/dedicated/DedicatedServer.java
index df6eaa94f2928242dbd69a918d0b0b919bd3436b..c98717af85eb64a160733efa309621942a248ffc 100644
--- a/src/main/java/net/minecraft/server/dedicated/DedicatedServer.java
+++ b/src/main/java/net/minecraft/server/dedicated/DedicatedServer.java
@@ -211,6 +211,13 @@ public class DedicatedServer extends MinecraftServer implements IMinecraftServer
             DedicatedServer.LOGGER.error("Unable to load server configuration", e);
             return false;
         }
+        // Purpur Start - Disable online mode when server use Bungeecord or Velocity
+        if (this.getOnlineMode() && com.destroystokyo.paper.PaperConfig.isProxyOnlineMode()) {
+            DedicatedServer.LOGGER.warn("Purpur has disabled online-mode automatically because you are using a proxy.");
+            DedicatedServer.LOGGER.warn("To stop displaying this message, put online-mode to false in server.properties");
+            this.setOnlineMode(false);
+        }
+        // Purpur end
         com.destroystokyo.paper.PaperConfig.registerCommands();
         // Purpur start
         try {
