From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: oharass <oharass@bk.ru>
Date: Sat, 25 Sep 2021 22:12:17 -0500
Subject: [PATCH] automatic offline mode if using bungee velocity


diff --git a/src/main/java/net/minecraft/server/dedicated/DedicatedServer.java b/src/main/java/net/minecraft/server/dedicated/DedicatedServer.java
index 79a9e8dd970b10ceb03d814224a568a9331208c9..0ede8ffd5e68af1801dcd3827c564dc8b1cdc9ce 100644
--- a/src/main/java/net/minecraft/server/dedicated/DedicatedServer.java
+++ b/src/main/java/net/minecraft/server/dedicated/DedicatedServer.java
@@ -227,6 +227,7 @@ public class DedicatedServer extends MinecraftServer implements ServerInterface
             return false;
         }
         net.pl3x.purpur.PurpurConfig.registerCommands();
+        if (org.spigotmc.SpigotConfig.bungee || com.destroystokyo.paper.PaperConfig.velocitySupport) this.setUsesAuthentication(false);
         // Purpur end
         com.destroystokyo.paper.VersionHistoryManager.INSTANCE.getClass(); // load version history now
         io.papermc.paper.util.ObfHelper.INSTANCE.getClass(); // load mappings for stacktrace deobf and etc.
