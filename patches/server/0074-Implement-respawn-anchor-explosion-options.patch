From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: William Blake Galbreath <blake.galbreath@gmail.com>
Date: Sat, 4 Jul 2020 13:23:19 -0500
Subject: [PATCH] Implement respawn anchor explosion options


diff --git a/src/main/java/net/minecraft/world/level/block/RespawnAnchorBlock.java b/src/main/java/net/minecraft/world/level/block/RespawnAnchorBlock.java
index c2f3d3a09327e7cb7d3167609eb3ce68eadf6443..ebe31ae50b29ab15f459c44615cba893d62a06eb 100644
--- a/src/main/java/net/minecraft/world/level/block/RespawnAnchorBlock.java
+++ b/src/main/java/net/minecraft/world/level/block/RespawnAnchorBlock.java
@@ -124,7 +124,7 @@ public class RespawnAnchorBlock extends Block {
                 return pos.equals(explodedPos) && bl2 ? Optional.of(Blocks.WATER.getExplosionResistance()) : super.getBlockExplosionResistance(explosion, world, pos, blockState, fluidState);
             }
         };
-        world.explode((Entity)null, DamageSource.badRespawnPointExplosion(), explosionDamageCalculator, (double)explodedPos.getX() + 0.5D, (double)explodedPos.getY() + 0.5D, (double)explodedPos.getZ() + 0.5D, 5.0F, true, Explosion.BlockInteraction.DESTROY);
+        if (world.purpurConfig().blocks.respawnAnchor.explode) world.explode(null, DamageSource.badRespawnPointExplosion(), explosionDamageCalculator, (double) explodedPos.getX() + 0.5D, (double) explodedPos.getY() + 0.5D, (double) explodedPos.getZ() + 0.5D, (float) world.purpurConfig().blocks.respawnAnchor.explosionPower, world.purpurConfig().blocks.respawnAnchor.explosionFire, world.purpurConfig().blocks.respawnAnchor.explosionEffect); // Purpur
     }
 
     public static boolean canSetSpawn(Level world) {
diff --git a/src/main/java/org/purpurmc/purpur/configuration/PurpurWorldConfiguration.java b/src/main/java/org/purpurmc/purpur/configuration/PurpurWorldConfiguration.java
index 05884cc152b779e3f45dc4764bb8a57d9081a00e..c098d660ddb8735dd339efaebf9d68a720fbd9ac 100644
--- a/src/main/java/org/purpurmc/purpur/configuration/PurpurWorldConfiguration.java
+++ b/src/main/java/org/purpurmc/purpur/configuration/PurpurWorldConfiguration.java
@@ -1465,6 +1465,14 @@ public class PurpurWorldConfiguration extends ConfigurationPart {
             public boolean explosionFire = true;
             public Explosion.BlockInteraction explosionEffect = Explosion.BlockInteraction.DESTROY;
         }
+
+        public RespawnAnchor respawnAnchor;
+        public class RespawnAnchor extends ConfigurationPart {
+            public boolean explode = true;
+            public double explosionPower = 5.0D;
+            public boolean explosionFire = true;
+            public Explosion.BlockInteraction explosionEffect = Explosion.BlockInteraction.DESTROY;
+        }
     }
 
     public ArmorStand armorstand;
