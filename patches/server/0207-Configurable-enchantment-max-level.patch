From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: DoctaEnkoda <bierquejason@gmail.com>
Date: Mon, 3 May 2021 17:39:22 +0200
Subject: [PATCH] Configurable enchantment max level

This patch is from an old feature of Purpur:
https://github.com/pl3xgaming/Purpur/blob/ver/1.15/patches/server/0103-Configurable-enchantment-max-level.patch

diff --git a/src/main/java/net/minecraft/world/item/enchantment/Enchantment.java b/src/main/java/net/minecraft/world/item/enchantment/Enchantment.java
index b76ef55145336cc8dc4857b79767f5a738ad5144..b1b5657f9781cc4a8806bd5af7645f03bcf497d4 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/Enchantment.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/Enchantment.java
@@ -22,6 +22,7 @@ public abstract class Enchantment {
     public final EnchantmentSlotType itemTarget;
     @Nullable
     protected String c;
+    private int maxLevelEnchant = 1; // Purpur
 
     protected Enchantment(Enchantment.Rarity enchantment_rarity, EnchantmentSlotType enchantmentslottype, EnumItemSlot[] aenumitemslot) {
         this.d = enchantment_rarity;
@@ -55,7 +56,13 @@ public abstract class Enchantment {
     }
 
     public int getMaxLevel() {
-        return 1;
+        // Purpur Start
+        return this.maxLevelEnchant;
+    }
+
+    public final void setMaxLevelEnchant(int levelEnchant) {
+        this.maxLevelEnchant = levelEnchant;
+        // Purpur End
     }
 
     public int a(int i) {
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentArrowDamage.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentArrowDamage.java
index dcc9de418c01ab18138b66e6ed6f74e472978373..e7948ebe4a1a24b815ae50aa1486e4a2c06c5c83 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentArrowDamage.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentArrowDamage.java
@@ -6,6 +6,7 @@ public class EnchantmentArrowDamage extends Enchantment {
 
     public EnchantmentArrowDamage(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.BOW, aenumitemslot);
+        setMaxLevelEnchant(5);// Purpur
     }
 
     @Override
@@ -17,9 +18,4 @@ public class EnchantmentArrowDamage extends Enchantment {
     public int b(int i) {
         return this.a(i) + 15;
     }
-
-    @Override
-    public int getMaxLevel() {
-        return 5;
-    }
 }
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentArrowKnockback.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentArrowKnockback.java
index 075c151080ab013b02a5688f2a97a8a075fb5128..89544c11bb06d69e5deb1337efad1dee949b873b 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentArrowKnockback.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentArrowKnockback.java
@@ -6,6 +6,7 @@ public class EnchantmentArrowKnockback extends Enchantment {
 
     public EnchantmentArrowKnockback(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.BOW, aenumitemslot);
+        setMaxLevelEnchant(2); // Purpur
     }
 
     @Override
@@ -17,9 +18,4 @@ public class EnchantmentArrowKnockback extends Enchantment {
     public int b(int i) {
         return this.a(i) + 25;
     }
-
-    @Override
-    public int getMaxLevel() {
-        return 2;
-    }
 }
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentBinding.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentBinding.java
index 81c9d7c2f40850bc404cfe9cda7358d18f873a03..22eb9f458d85f37416224ba332bebb85bea9a82d 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentBinding.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentBinding.java
@@ -6,6 +6,7 @@ public class EnchantmentBinding extends Enchantment {
 
     public EnchantmentBinding(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.WEARABLE, aenumitemslot);
+        setMaxLevelEnchant(1); // Purpur
     }
 
     @Override
@@ -27,9 +28,4 @@ public class EnchantmentBinding extends Enchantment {
     public boolean isTreasure() {
         return true;
     }
-
-    @Override
-    public boolean c() {
-        return true;
-    }
 }
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentDepthStrider.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentDepthStrider.java
index 289562f80e798bd928821253a8a6498912114c4b..52f8f901391b16c7a9d781681c9190b9b1ffab6c 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentDepthStrider.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentDepthStrider.java
@@ -6,6 +6,7 @@ public class EnchantmentDepthStrider extends Enchantment {
 
     public EnchantmentDepthStrider(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.ARMOR_FEET, aenumitemslot);
+        setMaxLevelEnchant(3); // Purpur
     }
 
     @Override
@@ -18,11 +19,6 @@ public class EnchantmentDepthStrider extends Enchantment {
         return this.a(i) + 15;
     }
 
-    @Override
-    public int getMaxLevel() {
-        return 3;
-    }
-
     @Override
     public boolean a(Enchantment enchantment) {
         return super.a(enchantment) && enchantment != Enchantments.FROST_WALKER;
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentDigging.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentDigging.java
index 8f64960fe631e9ea60f78e35483334969dbfbbd5..9d526a598b8b7100b3b8e587b033e0eefd728bd8 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentDigging.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentDigging.java
@@ -8,6 +8,7 @@ public class EnchantmentDigging extends Enchantment {
 
     protected EnchantmentDigging(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.DIGGER, aenumitemslot);
+        setMaxLevelEnchant(5); // Purpur
     }
 
     @Override
@@ -20,11 +21,6 @@ public class EnchantmentDigging extends Enchantment {
         return super.a(i) + 50;
     }
 
-    @Override
-    public int getMaxLevel() {
-        return 5;
-    }
-
     @Override
     public boolean canEnchant(ItemStack itemstack) {
         return itemstack.getItem() == Items.SHEARS ? true : super.canEnchant(itemstack);
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentDurability.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentDurability.java
index 06ce97fe5b5ddd9aba0c10ea082af9899ad52150..37841e2be19535536ffaccce888f9577559aaf81 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentDurability.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentDurability.java
@@ -9,6 +9,7 @@ public class EnchantmentDurability extends Enchantment {
 
     protected EnchantmentDurability(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.BREAKABLE, aenumitemslot);
+        setMaxLevelEnchant(3); // Purpur
     }
 
     @Override
@@ -21,11 +22,6 @@ public class EnchantmentDurability extends Enchantment {
         return super.a(i) + 50;
     }
 
-    @Override
-    public int getMaxLevel() {
-        return 3;
-    }
-
     @Override
     public boolean canEnchant(ItemStack itemstack) {
         return itemstack.e() ? true : super.canEnchant(itemstack);
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentFire.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentFire.java
index b9c841a8062ff7e67a84bb8a704de0d39c6a10ae..2963fe4727ab65468f821cd8fe4fcd9a2e4d99c8 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentFire.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentFire.java
@@ -6,6 +6,7 @@ public class EnchantmentFire extends Enchantment {
 
     protected EnchantmentFire(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.WEAPON, aenumitemslot);
+        setMaxLevelEnchant(2); // Purpur
     }
 
     @Override
@@ -17,9 +18,4 @@ public class EnchantmentFire extends Enchantment {
     public int b(int i) {
         return super.a(i) + 50;
     }
-
-    @Override
-    public int getMaxLevel() {
-        return 2;
-    }
 }
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentFlameArrows.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentFlameArrows.java
index b62a9cd8dd25e186781c3baba935226f590df3a0..1bc3f8f83e8b803c81879c409bcc1d1c18900dce 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentFlameArrows.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentFlameArrows.java
@@ -6,6 +6,7 @@ public class EnchantmentFlameArrows extends Enchantment {
 
     public EnchantmentFlameArrows(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.BOW, aenumitemslot);
+        setMaxLevelEnchant(1); // Purpur
     }
 
     @Override
@@ -17,9 +18,4 @@ public class EnchantmentFlameArrows extends Enchantment {
     public int b(int i) {
         return 50;
     }
-
-    @Override
-    public int getMaxLevel() {
-        return 1;
-    }
 }
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentFrostWalker.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentFrostWalker.java
index fe988be1769ec06d7d738f1bf7142231324f4caa..91d9c7ebb169b909b987417b9ae010a782e54b90 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentFrostWalker.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentFrostWalker.java
@@ -17,6 +17,7 @@ public class EnchantmentFrostWalker extends Enchantment {
 
     public EnchantmentFrostWalker(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.ARMOR_FEET, aenumitemslot);
+        setMaxLevelEnchant(2); // Purpur
     }
 
     @Override
@@ -34,11 +35,6 @@ public class EnchantmentFrostWalker extends Enchantment {
         return true;
     }
 
-    @Override
-    public int getMaxLevel() {
-        return 2;
-    }
-
     public static void a(EntityLiving entityliving, World world, BlockPosition blockposition, int i) {
         if (entityliving.isOnGround()) {
             IBlockData iblockdata = Blocks.FROSTED_ICE.getBlockData();
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentInfiniteArrows.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentInfiniteArrows.java
index 07980bf0735aab4aaa379b68d6d9b1dc494a0bab..31a999c70eb2b06a9cc3a3777318ff3e34a015eb 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentInfiniteArrows.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentInfiniteArrows.java
@@ -6,6 +6,7 @@ public class EnchantmentInfiniteArrows extends Enchantment {
 
     public EnchantmentInfiniteArrows(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, net.pl3x.purpur.PurpurConfig.allowCrossbowInfinity ? EnchantmentSlotType.BOW_AND_CROSSBOW : EnchantmentSlotType.BOW, aenumitemslot); // Purpur
+        setMaxLevelEnchant(1); // Purpur
     }
 
     @Override
@@ -18,11 +19,6 @@ public class EnchantmentInfiniteArrows extends Enchantment {
         return 50;
     }
 
-    @Override
-    public int getMaxLevel() {
-        return 1;
-    }
-
     @Override
     public boolean a(Enchantment enchantment) {
         return enchantment instanceof EnchantmentMending ? net.pl3x.purpur.PurpurConfig.allowInfinityMending : super.a(enchantment); // Purpur
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentKnockback.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentKnockback.java
index 8e7cb135ad7fcde0d1c2a2c1f3e90f48e997d817..6ca1719dd0ef051e19b0f6d86dcc7a0b9b07fa4b 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentKnockback.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentKnockback.java
@@ -6,6 +6,7 @@ public class EnchantmentKnockback extends Enchantment {
 
     protected EnchantmentKnockback(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.WEAPON, aenumitemslot);
+        setMaxLevelEnchant(2); // Purpur
     }
 
     @Override
@@ -17,9 +18,4 @@ public class EnchantmentKnockback extends Enchantment {
     public int b(int i) {
         return super.a(i) + 50;
     }
-
-    @Override
-    public int getMaxLevel() {
-        return 2;
-    }
 }
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentLootBonus.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentLootBonus.java
index be76398fe8114a4771581a1372d1d8c9a059181b..9e1378cf880f8e81b137bdd8d98153378a9e7171 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentLootBonus.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentLootBonus.java
@@ -6,6 +6,7 @@ public class EnchantmentLootBonus extends Enchantment {
 
     protected EnchantmentLootBonus(Enchantment.Rarity enchantment_rarity, EnchantmentSlotType enchantmentslottype, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, enchantmentslottype, aenumitemslot);
+        setMaxLevelEnchant(3); // Purpur
     }
 
     @Override
@@ -18,11 +19,6 @@ public class EnchantmentLootBonus extends Enchantment {
         return super.a(i) + 50;
     }
 
-    @Override
-    public int getMaxLevel() {
-        return 3;
-    }
-
     @Override
     public boolean a(Enchantment enchantment) {
         return super.a(enchantment) && enchantment != Enchantments.SILK_TOUCH;
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentLure.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentLure.java
index ee7766ad50be927a86bcf1f46d82cd463978ea56..88ef5ac1eab9f0fe027335cb8c253b95a244e985 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentLure.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentLure.java
@@ -6,6 +6,7 @@ public class EnchantmentLure extends Enchantment {
 
     protected EnchantmentLure(Enchantment.Rarity enchantment_rarity, EnchantmentSlotType enchantmentslottype, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, enchantmentslottype, aenumitemslot);
+        setMaxLevelEnchant(3); // Purpur
     }
 
     @Override
@@ -17,9 +18,4 @@ public class EnchantmentLure extends Enchantment {
     public int b(int i) {
         return super.a(i) + 50;
     }
-
-    @Override
-    public int getMaxLevel() {
-        return 3;
-    }
 }
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentMending.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentMending.java
index 8068b6147d1910c30b33bb5571e49af6928e76c4..9cf8fbc0d116bbd75ec222f26a1047e5bb835e79 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentMending.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentMending.java
@@ -6,6 +6,7 @@ public class EnchantmentMending extends Enchantment {
 
     public EnchantmentMending(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.BREAKABLE, aenumitemslot);
+        setMaxLevelEnchant(1); // Purpur
     }
 
     @Override
@@ -22,9 +23,4 @@ public class EnchantmentMending extends Enchantment {
     public boolean isTreasure() {
         return true;
     }
-
-    @Override
-    public int getMaxLevel() {
-        return 1;
-    }
 }
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentMultishot.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentMultishot.java
index 31b3c5150339d2bf2608729d3f2a731e78ca5f7f..5b715af2746173cf4a9b758bf7cff0a5d41d7243 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentMultishot.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentMultishot.java
@@ -6,6 +6,7 @@ public class EnchantmentMultishot extends Enchantment {
 
     public EnchantmentMultishot(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.CROSSBOW, aenumitemslot);
+        setMaxLevelEnchant(1); // Purpur
     }
 
     @Override
@@ -18,11 +19,6 @@ public class EnchantmentMultishot extends Enchantment {
         return 50;
     }
 
-    @Override
-    public int getMaxLevel() {
-        return 1;
-    }
-
     @Override
     public boolean a(Enchantment enchantment) {
         return super.a(enchantment) && enchantment != Enchantments.PIERCING;
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentOxygen.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentOxygen.java
index dcc5bb141b1d0372b41546f9338670b898f7fa1d..49c01e12cf28b061fc7c1a34d3ad35c739466a07 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentOxygen.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentOxygen.java
@@ -6,6 +6,7 @@ public class EnchantmentOxygen extends Enchantment {
 
     public EnchantmentOxygen(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.ARMOR_HEAD, aenumitemslot);
+        setMaxLevelEnchant(3); // Purpur
     }
 
     @Override
@@ -17,9 +18,4 @@ public class EnchantmentOxygen extends Enchantment {
     public int b(int i) {
         return this.a(i) + 30;
     }
-
-    @Override
-    public int getMaxLevel() {
-        return 3;
-    }
 }
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentPiercing.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentPiercing.java
index 45e51b2e46e7b42467239871e72b1fbb803bd99a..547db5429b7f6e2bbe06e5301300d5f3fe46d394 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentPiercing.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentPiercing.java
@@ -6,6 +6,7 @@ public class EnchantmentPiercing extends Enchantment {
 
     public EnchantmentPiercing(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.CROSSBOW, aenumitemslot);
+        setMaxLevelEnchant(4); // Purpur
     }
 
     @Override
@@ -18,11 +19,6 @@ public class EnchantmentPiercing extends Enchantment {
         return 50;
     }
 
-    @Override
-    public int getMaxLevel() {
-        return 4;
-    }
-
     @Override
     public boolean a(Enchantment enchantment) {
         return super.a(enchantment) && enchantment != Enchantments.MULTISHOT;
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentProtection.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentProtection.java
index 7ffa1919b9619f5d1b6894150b1f915fee46ac29..048279d9b8a8eee6ed9df9e2207084d2dc5efa71 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentProtection.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentProtection.java
@@ -12,6 +12,7 @@ public class EnchantmentProtection extends Enchantment {
     public EnchantmentProtection(Enchantment.Rarity enchantment_rarity, EnchantmentProtection.DamageType enchantmentprotection_damagetype, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, enchantmentprotection_damagetype == EnchantmentProtection.DamageType.FALL ? EnchantmentSlotType.ARMOR_FEET : EnchantmentSlotType.ARMOR, aenumitemslot);
         this.a = enchantmentprotection_damagetype;
+        setMaxLevelEnchant(4); // Purpur
     }
 
     @Override
@@ -24,11 +25,6 @@ public class EnchantmentProtection extends Enchantment {
         return this.a(i) + this.a.c();
     }
 
-    @Override
-    public int getMaxLevel() {
-        return 4;
-    }
-
     @Override
     public int a(int i, DamageSource damagesource) {
         return damagesource.ignoresInvulnerability() ? 0 : (this.a == EnchantmentProtection.DamageType.ALL ? i : (this.a == EnchantmentProtection.DamageType.FIRE && damagesource.isFire() ? i * 2 : (this.a == EnchantmentProtection.DamageType.FALL && damagesource == DamageSource.FALL ? i * 3 : (this.a == EnchantmentProtection.DamageType.EXPLOSION && damagesource.isExplosion() ? i * 2 : (this.a == EnchantmentProtection.DamageType.PROJECTILE && damagesource.b() ? i * 2 : 0)))));
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentQuickCharge.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentQuickCharge.java
index 3cb845fc8c9acc6f32b70ad0f236ea996df5faa3..ae218f78d9c9da1943297abb002edfbfb4cddc8f 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentQuickCharge.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentQuickCharge.java
@@ -6,6 +6,7 @@ public class EnchantmentQuickCharge extends Enchantment {
 
     public EnchantmentQuickCharge(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.CROSSBOW, aenumitemslot);
+        setMaxLevelEnchant(3); // Purpur
     }
 
     @Override
@@ -17,9 +18,4 @@ public class EnchantmentQuickCharge extends Enchantment {
     public int b(int i) {
         return 50;
     }
-
-    @Override
-    public int getMaxLevel() {
-        return 3;
-    }
 }
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentSilkTouch.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentSilkTouch.java
index 69514d6e5ea308a9182d4a18ef4a181dc718d962..7242543f0ab8d7f5ab1c1222f997d3feca932be6 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentSilkTouch.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentSilkTouch.java
@@ -6,6 +6,7 @@ public class EnchantmentSilkTouch extends Enchantment {
 
     protected EnchantmentSilkTouch(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.DIGGER, aenumitemslot);
+        setMaxLevelEnchant(1); // Purpur
     }
 
     @Override
@@ -18,11 +19,6 @@ public class EnchantmentSilkTouch extends Enchantment {
         return super.a(i) + 50;
     }
 
-    @Override
-    public int getMaxLevel() {
-        return 1;
-    }
-
     @Override
     public boolean a(Enchantment enchantment) {
         return super.a(enchantment) && enchantment != Enchantments.LOOT_BONUS_BLOCKS;
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentSoulSpeed.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentSoulSpeed.java
index 274b6b7249c6a174b46c31adc2a20c6ec41f8ebc..67bf78930a59bb5034cf7663d0f2e67c7936af52 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentSoulSpeed.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentSoulSpeed.java
@@ -6,6 +6,7 @@ public class EnchantmentSoulSpeed extends Enchantment {
 
     public EnchantmentSoulSpeed(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.ARMOR_FEET, aenumitemslot);
+        setMaxLevelEnchant(3); // Purpur
     }
 
     @Override
@@ -32,9 +33,4 @@ public class EnchantmentSoulSpeed extends Enchantment {
     public boolean i() {
         return false;
     }
-
-    @Override
-    public int getMaxLevel() {
-        return 3;
-    }
 }
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentSweeping.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentSweeping.java
index 742e7c83c82e95c4da5aa034f63bb9dd095fddcb..a11ca4fe8a31dbfeba51eefafb3fdbdd0a2f72f6 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentSweeping.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentSweeping.java
@@ -6,6 +6,7 @@ public class EnchantmentSweeping extends Enchantment {
 
     public EnchantmentSweeping(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.WEAPON, aenumitemslot);
+        setMaxLevelEnchant(3); // Purpur
     }
 
     @Override
@@ -18,11 +19,6 @@ public class EnchantmentSweeping extends Enchantment {
         return this.a(i) + 15;
     }
 
-    @Override
-    public int getMaxLevel() {
-        return 3;
-    }
-
     public static float e(int i) {
         return 1.0F - 1.0F / (float) (i + 1);
     }
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentThorns.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentThorns.java
index 490e3755b6ab869d499cdd47ee04d57d921ffd35..4f8bf3837b5966b8eb17b1afadeee1917f9bd14f 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentThorns.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentThorns.java
@@ -13,6 +13,7 @@ public class EnchantmentThorns extends Enchantment {
 
     public EnchantmentThorns(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.ARMOR_CHEST, aenumitemslot);
+        setMaxLevelEnchant(3); // Purpur
     }
 
     @Override
@@ -25,11 +26,6 @@ public class EnchantmentThorns extends Enchantment {
         return super.a(i) + 50;
     }
 
-    @Override
-    public int getMaxLevel() {
-        return 3;
-    }
-
     @Override
     public boolean canEnchant(ItemStack itemstack) {
         return itemstack.getItem() instanceof ItemArmor ? true : super.canEnchant(itemstack);
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentTridentChanneling.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentTridentChanneling.java
index 57d269b0c16c10336894a7cc66d5e010ab3ca2e0..fcf424dad14e2f03210f40e902cbc5fab2d2dbed 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentTridentChanneling.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentTridentChanneling.java
@@ -6,6 +6,7 @@ public class EnchantmentTridentChanneling extends Enchantment {
 
     public EnchantmentTridentChanneling(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.TRIDENT, aenumitemslot);
+        setMaxLevelEnchant(1); // Purpur
     }
 
     @Override
@@ -18,11 +19,6 @@ public class EnchantmentTridentChanneling extends Enchantment {
         return 50;
     }
 
-    @Override
-    public int getMaxLevel() {
-        return 1;
-    }
-
     @Override
     public boolean a(Enchantment enchantment) {
         return super.a(enchantment);
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentTridentImpaling.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentTridentImpaling.java
index b032063ecee9a7455e6936b5f0cec8fb719e99af..254127f998577025e83584b753acf975fa6ff28a 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentTridentImpaling.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentTridentImpaling.java
@@ -7,6 +7,7 @@ public class EnchantmentTridentImpaling extends Enchantment {
 
     public EnchantmentTridentImpaling(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.TRIDENT, aenumitemslot);
+        setMaxLevelEnchant(5); // Purpur
     }
 
     @Override
@@ -19,11 +20,6 @@ public class EnchantmentTridentImpaling extends Enchantment {
         return this.a(i) + 20;
     }
 
-    @Override
-    public int getMaxLevel() {
-        return 5;
-    }
-
     @Override
     public float a(int i, EnumMonsterType enummonstertype) {
         return enummonstertype == EnumMonsterType.WATER_MOB ? (float) i * 2.5F : 0.0F;
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentTridentLoyalty.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentTridentLoyalty.java
index 05cea3f5a1dfb1b11c0e0a88d0528086f5068939..c523222eeca52fbb0194679978a2340b4dcc3f67 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentTridentLoyalty.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentTridentLoyalty.java
@@ -6,6 +6,7 @@ public class EnchantmentTridentLoyalty extends Enchantment {
 
     public EnchantmentTridentLoyalty(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.TRIDENT, aenumitemslot);
+        setMaxLevelEnchant(3); // Purpur
     }
 
     @Override
@@ -18,11 +19,6 @@ public class EnchantmentTridentLoyalty extends Enchantment {
         return 50;
     }
 
-    @Override
-    public int getMaxLevel() {
-        return 3;
-    }
-
     @Override
     public boolean a(Enchantment enchantment) {
         return super.a(enchantment);
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentTridentRiptide.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentTridentRiptide.java
index 25b7d33c150230bd88be7a4b36f5c656f924e207..c1276f2cd2f46be58d6a3833f973d621ac7c6d35 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentTridentRiptide.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentTridentRiptide.java
@@ -6,6 +6,7 @@ public class EnchantmentTridentRiptide extends Enchantment {
 
     public EnchantmentTridentRiptide(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.TRIDENT, aenumitemslot);
+        setMaxLevelEnchant(3); // Purpur
     }
 
     @Override
@@ -18,11 +19,6 @@ public class EnchantmentTridentRiptide extends Enchantment {
         return 50;
     }
 
-    @Override
-    public int getMaxLevel() {
-        return 3;
-    }
-
     @Override
     public boolean a(Enchantment enchantment) {
         return super.a(enchantment) && enchantment != Enchantments.LOYALTY && enchantment != Enchantments.CHANNELING;
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentVanishing.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentVanishing.java
index 6080fa7b7c83c986855c030251f4141d593dc21f..4e1e62da09c51e6057746d34159bfc2375e0414b 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentVanishing.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentVanishing.java
@@ -6,6 +6,7 @@ public class EnchantmentVanishing extends Enchantment {
 
     public EnchantmentVanishing(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.VANISHABLE, aenumitemslot);
+        setMaxLevelEnchant(1); // Purpur
     }
 
     @Override
@@ -18,11 +19,6 @@ public class EnchantmentVanishing extends Enchantment {
         return 50;
     }
 
-    @Override
-    public int getMaxLevel() {
-        return 1;
-    }
-
     @Override
     public boolean isTreasure() {
         return true;
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentWaterWorker.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentWaterWorker.java
index 68073fec39f3b5f652dd5238fbae7b297a01d28c..9a02ce398d797035a90e3abc5b19a53695c53bed 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentWaterWorker.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentWaterWorker.java
@@ -6,6 +6,7 @@ public class EnchantmentWaterWorker extends Enchantment {
 
     public EnchantmentWaterWorker(Enchantment.Rarity enchantment_rarity, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.ARMOR_HEAD, aenumitemslot);
+        setMaxLevelEnchant(1); // Purpur
     }
 
     @Override
@@ -17,9 +18,4 @@ public class EnchantmentWaterWorker extends Enchantment {
     public int b(int i) {
         return this.a(i) + 40;
     }
-
-    @Override
-    public int getMaxLevel() {
-        return 1;
-    }
 }
diff --git a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentWeaponDamage.java b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentWeaponDamage.java
index 477514b64b6eedcb40b67e6f876caff39c325a48..dff7613221454f4a52a838b08ddf99d93faf55e0 100644
--- a/src/main/java/net/minecraft/world/item/enchantment/EnchantmentWeaponDamage.java
+++ b/src/main/java/net/minecraft/world/item/enchantment/EnchantmentWeaponDamage.java
@@ -20,6 +20,7 @@ public class EnchantmentWeaponDamage extends Enchantment {
     public EnchantmentWeaponDamage(Enchantment.Rarity enchantment_rarity, int i, EnumItemSlot... aenumitemslot) {
         super(enchantment_rarity, EnchantmentSlotType.WEAPON, aenumitemslot);
         this.a = i;
+        setMaxLevelEnchant(5); // Purpur
     }
 
     @Override
@@ -32,11 +33,6 @@ public class EnchantmentWeaponDamage extends Enchantment {
         return this.a(i) + EnchantmentWeaponDamage.g[this.a];
     }
 
-    @Override
-    public int getMaxLevel() {
-        return 5;
-    }
-
     @Override
     public float a(int i, EnumMonsterType enummonstertype) {
         return this.a == 0 ? 1.0F + (float) Math.max(0, i - 1) * 0.5F : (this.a == 1 && enummonstertype == EnumMonsterType.UNDEAD ? (float) i * 2.5F : (this.a == 2 && enummonstertype == EnumMonsterType.ARTHROPOD ? (float) i * 2.5F : 0.0F));
diff --git a/src/main/java/net/pl3x/purpur/PurpurConfig.java b/src/main/java/net/pl3x/purpur/PurpurConfig.java
index 7e8654e4df61527f33d4fce2afdb14e29b90a4c2..5f4482def992b245ce3b1b45308d050507d9f7a1 100644
--- a/src/main/java/net/pl3x/purpur/PurpurConfig.java
+++ b/src/main/java/net/pl3x/purpur/PurpurConfig.java
@@ -3,10 +3,13 @@ package net.pl3x.purpur;
 import co.aikar.timings.TimingsManager;
 import com.destroystokyo.paper.PaperConfig;
 import com.google.common.base.Throwables;
+import net.minecraft.core.IRegistry;
 import net.minecraft.locale.LocaleLanguage;
+import net.minecraft.resources.MinecraftKey;
 import net.minecraft.server.MinecraftServer;
 import net.minecraft.world.entity.EntitySize;
 import net.minecraft.world.entity.EntityTypes;
+import net.minecraft.world.item.enchantment.Enchantment;
 import net.pl3x.purpur.command.PurpurCommand;
 import org.bukkit.Bukkit;
 import org.bukkit.command.Command;
@@ -251,6 +254,11 @@ public class PurpurConfig {
         allowInfinityMending = getBoolean("settings.enchantment.allow-infinity-and-mending-together", allowInfinityMending);
         allowCrossbowInfinity = getBoolean("settings.enchantment.allow-infinity-on-crossbow", allowCrossbowInfinity);
         allowUnsafeEnchants = getBoolean("settings.enchantment.allow-unsafe-enchants", allowUnsafeEnchants);
+        for (Enchantment enchantment : IRegistry.ENCHANTMENT) {
+            MinecraftKey enchantmentKey = IRegistry.ENCHANTMENT.getKey(enchantment);
+            if (enchantmentKey == null) continue;
+            enchantment.setMaxLevelEnchant(getInt("settings.enchantment.all-enchant.%s.max-level".replace("%s", enchantmentKey.getKey()), enchantment.getMaxLevel()));
+        }
     }
 
     public static boolean endermanShortHeight = false;
