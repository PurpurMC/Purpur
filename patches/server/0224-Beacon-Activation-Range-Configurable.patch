From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: DoctaEnkoda <bierquejason@gmail.com>
Date: Wed, 2 Jun 2021 02:45:47 +0200
Subject: [PATCH] Beacon Activation Range Configurable


diff --git a/src/main/java/net/minecraft/world/level/block/entity/TileEntityBeacon.java b/src/main/java/net/minecraft/world/level/block/entity/TileEntityBeacon.java
index f7b210e6d60533d9faf60183a80a562b25f945d0..a45b73ba9b197bfb86b6d08a8a77ea19249cb940 100644
--- a/src/main/java/net/minecraft/world/level/block/entity/TileEntityBeacon.java
+++ b/src/main/java/net/minecraft/world/level/block/entity/TileEntityBeacon.java
@@ -79,7 +79,23 @@ public class TileEntityBeacon extends TileEntity implements ITileInventory, ITic
 
     public double getEffectRange() {
         if (this.effectRange < 0) {
-            return this.levels * 10 + 10;
+            // Purpur Start
+            if (this.getWorld() != null) {
+                switch (this.getLevels()) {
+                    case 1:
+                        return this.getWorld().purpurConfig.beaconLevelOne;
+                    case 2:
+                        return this.getWorld().purpurConfig.beaconLevelTwo;
+                    case 3:
+                        return this.getWorld().purpurConfig.beaconLevelThree;
+                    case 4:
+                        return this.getWorld().purpurConfig.beaconLevelFour;
+                    default:
+                        return this.getLevels() * 10 + 10;
+                }
+            }
+            return this.getLevels() * 10 + 10;
+            // Purpur End
         } else {
             return effectRange;
         }
@@ -367,6 +383,7 @@ public class TileEntityBeacon extends TileEntity implements ITileInventory, ITic
         this.world.playSound((EntityHuman) null, this.position, soundeffect, SoundCategory.BLOCKS, 1.0F, 1.0F);
     }
 
+    public int getLevels() { return h(); } // Purpur - OBFHELPERS
     public int h() {
         return this.levels;
     }
diff --git a/src/main/java/net/pl3x/purpur/PurpurWorldConfig.java b/src/main/java/net/pl3x/purpur/PurpurWorldConfig.java
index bd72ed2da22c1d1121ea7ca04e163979baa05b27..009fd34f4713ccb266c2c2de7d5f83faa6ab4869 100644
--- a/src/main/java/net/pl3x/purpur/PurpurWorldConfig.java
+++ b/src/main/java/net/pl3x/purpur/PurpurWorldConfig.java
@@ -2189,4 +2189,16 @@ public class PurpurWorldConfig {
     private void pistonSettings() {
         pistonBlockPushLimit = getInt("blocks.piston.block-push-limit", pistonBlockPushLimit);
     }
+
+    public int beaconLevelOne = 20;
+    public int beaconLevelTwo = 30;
+    public int beaconLevelThree = 40;
+    public int beaconLevelFour = 50;
+    public void beaconSettings() {
+        beaconLevelOne = getInt("blocks.beacon.effect-range.level-1", beaconLevelOne);
+        beaconLevelTwo = getInt("blocks.beacon.effect-range.level-2", beaconLevelTwo);
+        beaconLevelThree = getInt("blocks.beacon.effect-range.level-3", beaconLevelThree);
+        beaconLevelThree = getInt("blocks.beacon.effect-range.level-3", beaconLevelThree);
+        beaconLevelFour = getInt("blocks.beacon.effect-range.level-4", beaconLevelFour);
+    }
 }
