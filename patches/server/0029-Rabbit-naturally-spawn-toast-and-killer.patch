From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: William Blake Galbreath <blake.galbreath@gmail.com>
Date: Sat, 31 Aug 2019 17:47:11 -0500
Subject: [PATCH] Rabbit naturally spawn toast and killer


diff --git a/src/main/java/net/minecraft/world/entity/animal/Rabbit.java b/src/main/java/net/minecraft/world/entity/animal/Rabbit.java
index 877a599192361b2b7e60d0c0e755100466886d33..097496e4f66ec9e649edb237403e665d7161a268 100644
--- a/src/main/java/net/minecraft/world/entity/animal/Rabbit.java
+++ b/src/main/java/net/minecraft/world/entity/animal/Rabbit.java
@@ -436,7 +436,11 @@ public class Rabbit extends Animal {
             if (!this.hasCustomName()) {
                 this.setCustomName(Component.translatable(Util.makeDescriptionId("entity", Rabbit.KILLER_BUNNY)));
             }
+        // Purpur start
+        } else if (rabbitType == 98) {
+            setCustomName(Component.translatable("Toast"));
         }
+        // Purpur end
 
         this.entityData.set(Rabbit.DATA_TYPE_ID, rabbitType);
     }
@@ -457,6 +461,16 @@ public class Rabbit extends Animal {
     }
 
     private int getRandomRabbitType(LevelAccessor world) {
+        // Purpur start
+        Level level = world.getMinecraftWorld();
+        if (level.purpurConfig().mobs.rabbit.spawnKillerChance > 0D && random.nextDouble() <= level.purpurConfig().mobs.rabbit.spawnKillerChance) {
+            return 99;
+        }
+        if (level.purpurConfig().mobs.rabbit.spawnToastChance > 0D && random.nextDouble() <= level.purpurConfig().mobs.rabbit.spawnToastChance) {
+            return 98;
+        }
+        // Purpur end
+
         Holder<Biome> holder = world.getBiome(this.blockPosition());
         int i = world.getRandom().nextInt(100);
 
diff --git a/src/main/java/org/purpurmc/purpur/configuration/PurpurWorldConfiguration.java b/src/main/java/org/purpurmc/purpur/configuration/PurpurWorldConfiguration.java
index 7fc722e428f1b7e186eb02e482cc5136eb2858f9..50901f727d356453fb12721a4f7795536b4b7681 100644
--- a/src/main/java/org/purpurmc/purpur/configuration/PurpurWorldConfiguration.java
+++ b/src/main/java/org/purpurmc/purpur/configuration/PurpurWorldConfiguration.java
@@ -745,6 +745,9 @@ public class PurpurWorldConfiguration extends ConfigurationPart {
 
         public Rabbit rabbit;
         public class Rabbit extends ConfigurationPart {
+            public double spawnToastChance = 0.0D;
+            public double spawnKillerChance = 0.0D;
+
             public Ridable ridable;
             public class Ridable extends ConfigurationPart {
                 public boolean enabled = false;
