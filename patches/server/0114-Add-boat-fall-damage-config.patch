From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: William Blake Galbreath <Blake.Galbreath@GMail.com>
Date: Mon, 30 Nov 2020 19:36:35 -0600
Subject: [PATCH] Add boat fall damage config


diff --git a/src/main/java/net/minecraft/server/level/ServerPlayer.java b/src/main/java/net/minecraft/server/level/ServerPlayer.java
index 7e5fe3ccd296f5bedb3b44ec1cf56813487b455a..4a347845b0bb402b6937fc5dac55d9621f58ea6a 100644
--- a/src/main/java/net/minecraft/server/level/ServerPlayer.java
+++ b/src/main/java/net/minecraft/server/level/ServerPlayer.java
@@ -1032,7 +1032,16 @@ public class ServerPlayer extends Player {
         if (this.isInvulnerableTo(source)) {
             return false;
         } else {
-            if (source == DamageSource.FALL && getRootVehicle() instanceof net.minecraft.world.entity.vehicle.AbstractMinecart && level.purpurConfig().gameplayMechanics.controllableMinecarts.enabled && !level.purpurConfig().gameplayMechanics.controllableMinecarts.fallDamage) return false; // Purpur
+            // Purpur start
+            if (source == DamageSource.FALL) {
+                if (getRootVehicle() instanceof net.minecraft.world.entity.vehicle.AbstractMinecart && level.purpurConfig().gameplayMechanics.controllableMinecarts.enabled && !level.purpurConfig().gameplayMechanics.controllableMinecarts.fallDamage) {
+                    return false;
+                }
+                if (getRootVehicle() instanceof net.minecraft.world.entity.vehicle.Boat && !level.purpurConfig().gameplayMechanics.boat.doFallDamage) {
+                    return false;
+                }
+            }
+            // Purpur end
             boolean flag = this.server.isDedicatedServer() && this.isPvpAllowed() && "fall".equals(source.msgId);
 
             if (!flag && isSpawnInvulnerable() && source != DamageSource.OUT_OF_WORLD) { // Purpur
diff --git a/src/main/java/org/purpurmc/purpur/configuration/PurpurWorldConfiguration.java b/src/main/java/org/purpurmc/purpur/configuration/PurpurWorldConfiguration.java
index 08c6e3721ba82c18eedaac746fdd46e88c19945f..cb1afb0ee90ca4fbfcdef7cac6fa47007d4d3248 100644
--- a/src/main/java/org/purpurmc/purpur/configuration/PurpurWorldConfiguration.java
+++ b/src/main/java/org/purpurmc/purpur/configuration/PurpurWorldConfiguration.java
@@ -1472,6 +1472,7 @@ public class PurpurWorldConfiguration extends ConfigurationPart {
         public Boat boat;
         public class Boat extends ConfigurationPart {
             public boolean ejectOnLand = false;
+            public boolean doFallDamage = true;
         }
 
         public Elytra elytra;
