From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: 12emin34 <macanovic.emin@gmail.com>
Date: Tue, 10 Aug 2021 10:58:25 +0200
Subject: [PATCH] Option to make flame enchant work on crossbows


diff --git a/src/main/java/net/minecraft/world/item/CrossbowItem.java b/src/main/java/net/minecraft/world/item/CrossbowItem.java
index e2ff5d9c62ef812155e7851e6bc869e573f48240..75fcdadecfd4dad86e859a494a7df8f510e2729c 100644
--- a/src/main/java/net/minecraft/world/item/CrossbowItem.java
+++ b/src/main/java/net/minecraft/world/item/CrossbowItem.java
@@ -293,6 +293,10 @@ public class CrossbowItem extends ProjectileWeaponItem implements Vanishable {
             entityarrow.setPierceLevel((byte) i);
         }
 
+        if (EnchantmentHelper.getItemEnchantmentLevel(Enchantments.FLAMING_ARROWS, crossbow) > 0 && world.purpurConfig.crossbowArrowsAffectedByFlame) {
+            entityarrow.setSecondsOnFire(100);
+        }
+
         return entityarrow;
     }
 
diff --git a/src/main/java/net/pl3x/purpur/PurpurWorldConfig.java b/src/main/java/net/pl3x/purpur/PurpurWorldConfig.java
index 57c5e7c77079a214ce7fde850fe198005b2297cd..bb61f68bf15081de488279f86c6aecd696762b57 100644
--- a/src/main/java/net/pl3x/purpur/PurpurWorldConfig.java
+++ b/src/main/java/net/pl3x/purpur/PurpurWorldConfig.java
@@ -116,6 +116,11 @@ public class PurpurWorldConfig {
         armorstandPlaceWithArms = getBoolean("gameplay-mechanics.armorstand.place-with-arms-visible", armorstandPlaceWithArms);
     }
 
+    public boolean crossbowArrowsAffectedByFlame = false;
+    private void crossbowSettings() {
+        crossbowArrowsAffectedByFlame = getBoolean("gameplay-mechanics.crossbow.arrows-affected-by-flame", crossbowArrowsAffectedByFlame);
+    }
+
     public int daytimeTicks = 12000;
     public int nighttimeTicks = 12000;
     private void daytimeCycleSettings() {
